{{ define "title" }}Catalog{{ end }}

{{ define "main" }}
  <div data-page="catalog" class="max-w-screen-xl mx-auto flex flex-col grow w-full my-4 px-2 text-slate-950 ">
    <div class="flex justify-between my-3">
      <h1 class="w-full  text-2xl font-bold">Sketch Catalog</h1>
      <div class="block lg:hidden relative">
        <button id="mobileFilterMenu"
            class="flex p-3 gap-2 rounded-md bg-orange-600 hover:bg-orange-500">
          <p class="font-bold text-white tx-lg">Filters</p>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" fill="#FFFFFF">
            <path d="M440-120v-240h80v80h320v80H520v80h-80Zm-320-80v-80h240v80H120Zm160-160v-80H120v-80h160v-80h80v240h-80Zm160-80v-80h400v80H440Zm160-160v-240h80v80h160v80H680v80h-80Zm-480-80v-80h400v80H120Z"/>
          </svg>
        </button>
        <div id="mobileFilters" class="absolute top-12 right-0 
                  opacity-0 rounded-md bg-slate-50 gap-2 w-72 p-3
                  scale-95 transform origin-top transition-all pointer-events-none">
        </div>
      </div>
    </div>
    <section class="flex grow">
      <div id="filterSection" class="hidden lg:block w-80 border border-slate-950 rounded-md">
        <div class="flex items-center justify-between border-b border-slate-950">
          <h2 class="font-bold text-xl p-4">Filters</h2>
          <button class="castButton p-2">
            <img class="galleryArrow w-6" src="/static/img/dropdown-arrow-up.svg">
            <img class="galleryArrow hidden w-6" src="/static/img/dropdown-arrow-down.svg">
          </button>
        </div>
        <div id="desktopFilters" class="flex flex-col gap-2 w-72 p-2"></div>
      </div>
      <div id="results" 
          class="flex flex-col grow w-full lg:ml-2 border-slate-950"
          hx-trigger="filter-change"
        >
        {{ template "catalog-result" . }}
      </div>
    </section>
  </div>
  
  <filter-content>
    <div id="filters" class="flex flex-col gap-2">
      {{ template "video-catalog-filter" (dict "SearchResults" .SearchResults "ImageBaseUrl" $.ImageBaseUrl)}}
      <button id="filterApply" class="mt-1 w-full p-2 rounded-full
                    bg-orange-600 hover:bg-orange-500
                    text-white font-bold"
      >Apply</button>
    </div>
  </filter-content>

  <template id="filterTemplate">
    <div class="relative">
      <input
        type="search"
        name="actorNameFilter"
        class="filterSearch w-full px-3 py-1.5 
                border border-gray-300 rounded-lg 
                bg-slate-50 text-slate-700 shadow-sm
                placeholder-slate-400 focus:outline-none"
        hx-params="query"
        hx-trigger="focus, input changed delay:400ms, search"
        hx-target="next"
        hx-swap="innerHTML"
      />
      <ul class="dropdown list-none cursor-pointer absolute left-0 min-w-full bg-white border border-gray-300 rounded shadow-lg z-10 empty:hidden"></ul>
      <div class="filters flex flex-col gap-1 my-1"></div>
    </div>
  </template>
  <template id="filterProfile">
    <div class="flex justify-between items-center mt-1 rounded-full bg-slate-200">
      <div class="flex items-center overflow-hidden">
        <img class="rounded-full w-8"/>
        <h4 class="pl-2 overflow-hidden text-ellipsis whitespace-nowrap"></h4>
      </div>
      <button class="flex-shrink-0">
        <img class="p-1 rounded-full hover:bg-slate-300" src="/static/img/close.svg"/>
      </button>
    </div>
  </template>
{{ end }}
